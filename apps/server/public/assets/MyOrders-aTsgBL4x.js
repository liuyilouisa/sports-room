import{e as n,d,j as e}from"./index-BUS16Z0V.js";import{r as c,g as x}from"./order-C01BSQfb.js";import{O as o,V as m}from"./index-G2bsMOGr.js";function f(){const s=n(),{data:r=[],isLoading:a}=d({queryKey:["myOrders"],queryFn:x}),l=t=>{m.promise(c(Number(t)),{loading:"正在申请退款…",success:()=>(s.invalidateQueries({queryKey:["myOrders"]}),"退款成功"),error:i=>`退款失败：${i?.message||"未知错误"}`})};return a?e.jsx("div",{className:"flex h-40 items-center justify-center text-sm text-slate-500",children:"加载中…"}):r.length?e.jsxs(e.Fragment,{children:[e.jsx(o,{position:"top-center"}),e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-600",children:"活动"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-600",children:"口令"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-600",children:"状态"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-semibold uppercase tracking-wider text-slate-600",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:r.map(t=>e.jsxs("tr",{className:"transition hover:bg-slate-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-800",children:t.activity.title}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 font-mono text-xs text-slate-600",children:t.secret}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsx(p,{status:t.status})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center text-sm",children:e.jsx("button",{disabled:t.status!=="paid",onClick:()=>l(t.id),className:`rounded-md px-3 py-1 text-sm font-medium transition
                               disabled:cursor-not-allowed disabled:opacity-40
                               text-red-600 hover:bg-red-50 hover:text-red-700`,children:"退"})})]},t.id))})]})})})]}):e.jsx("div",{className:"flex h-40 flex-col items-center justify-center text-sm text-slate-500",children:e.jsx("span",{children:"暂无订单"})})}function p({status:s}){const r={PAID:"bg-emerald-100 text-emerald-700",REFUNDED:"bg-slate-100 text-slate-600",CANCELED:"bg-rose-100 text-rose-700"},a={PAID:"已支付",REFUNDED:"已退款",CANCELED:"已取消"},l=r[s]||"bg-gray-100 text-gray-600",t=a[s]||s;return e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${l}`,children:t})}export{f as default};
